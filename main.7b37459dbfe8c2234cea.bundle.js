(()=>{"use strict";var e,t={667:(e,t,s)=>{var i;s(440);class a extends Phaser.Scene{constructor(){super({key:"BootScene"})}preload(){this.cameras.main.setBackgroundColor(0),this.createLoadingGraphics(),this.input.setDefaultCursor("url(assets/images/normal.cur), pointer"),this.load.on("progress",(function(e){this.progressBar.clear(),this.progressBar.fillStyle(8971347,1),this.progressBar.fillRect(this.cameras.main.width/4,this.cameras.main.height/2-16,this.cameras.main.width/2*e,16)}),this),this.load.on("complete",(function(){this.progressBar.destroy(),this.loadingBar.destroy()}),this),this.load.pack("preload","./assets/pack.json","preload"),this.load.audio("gameBGM","assets/audio/GameBGM.mp3"),this.load.audio("menuBGM","assets/audio/MenuBGM.mp3"),this.load.audio("shootSound","assets/audio/shotFX.mp3"),this.load.audio("explosionSound","assets/audio/explodeFX.mp3"),this.load.audio("button","assets/audio/button.mp3"),this.load.audio("victory","assets/audio/victory.mp3"),this.load.audio("defeat","assets/audio/defeat.mp3")}update(){this.scene.start("MenuScene")}createLoadingGraphics(){this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(16777215,1),this.loadingBar.fillRect(this.cameras.main.width/4-2,this.cameras.main.height/2-18,this.cameras.main.width/2+4,20),this.progressBar=this.add.graphics()}}class h extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture),this.rotation=e.rotation,this.initImage(),this.scene.add.existing(this)}initImage(){this.bulletSpeed=800,this.setOrigin(.5,.5),this.setDepth(2),this.scene.physics.world.enable(this),this.scene.physics.velocityFromRotation(this.rotation-Math.PI/2,this.bulletSpeed,this.body.velocity);let e=this.scene;e.ignoreOnMiniMap(this),this.on(Phaser.GameObjects.Events.DESTROY,(()=>{let t=this.scene.add.sprite(this.x,this.y,"explosion").play("explosion").on("animationcomplete",(()=>{t.destroy()}));this.body.stop(),e.ignoreOnMiniMap(t)}))}update(){}}class n{constructor(e){this.observers=[],this.scene=e,this.pointer=e.input.activePointer,this.moveKeys={up:e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),down:e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),left:e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),right:e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D)},this.setupInputs()}attach(e){if(this.observers.includes(e))return console.log("Observer has already been attached.");this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Nonexistent observer.");this.observers.splice(t,1)}notify(){for(const e of this.observers)e.onNotify(this)}setupInputs(){this.scene.input.on(Phaser.Input.Events.POINTER_DOWN,(e=>{this.pointer=e,this.notify()})),this.scene.input.on(Phaser.Input.Events.POINTER_MOVE,(e=>{this.notify()})),this.scene.input.on(Phaser.Input.Events.POINTER_UP,(e=>{this.notify()})),this.moveKeys.up.on(Phaser.Input.Keyboard.Events.DOWN,(()=>{this.notify()})),this.moveKeys.down.on(Phaser.Input.Keyboard.Events.DOWN,(()=>{this.notify()})),this.moveKeys.left.on(Phaser.Input.Keyboard.Events.DOWN,(()=>{this.notify()})),this.moveKeys.right.on(Phaser.Input.Keyboard.Events.DOWN,(()=>{this.notify()})),this.moveKeys.up.on(Phaser.Input.Keyboard.Events.UP,(()=>{this.notify()})),this.moveKeys.down.on(Phaser.Input.Keyboard.Events.UP,(()=>{this.notify()})),this.moveKeys.left.on(Phaser.Input.Keyboard.Events.UP,(()=>{this.notify()})),this.moveKeys.right.on(Phaser.Input.Keyboard.Events.UP,(()=>{this.notify()}))}}class r extends Phaser.GameObjects.Image{onNotify(e){e instanceof n&&(this.cursors=e.pointer,this.direction={up:e.moveKeys.up.isDown,down:e.moveKeys.down.isDown,left:e.moveKeys.left.isDown,right:e.moveKeys.right.isDown})}getBullets(){return this.bullets}constructor(e){super(e.scene,e.x,e.y,e.texture,e.frame),this.initImage(),this.scene.add.existing(this)}initImage(){var e;this.health=1,this.lastShoot=0,this.speed=269,this.targetPosition=new Phaser.Math.Vector2(this.x,this.y),this.setOrigin(.5,.5),this.setDepth(0),this.angle=180,this.barrel=this.scene.add.image(this.x,this.y,"barrelBlue"),this.barrel.setOrigin(.5,1),this.barrel.setDepth(1),this.barrel.angle=180,this.lifeBar=this.scene.add.graphics(),this.redrawLifebar(),this.bullets=this.scene.add.group({active:!0,maxSize:10,runChildUpdate:!0}),null===(e=this.scene.input.mouse)||void 0===e||e.disableContextMenu(),this.cursors=this.scene.input.activePointer,this.direction={up:!1,down:!1,left:!1,right:!1},this.scene.physics.world.enable(this),this.body.allowGravity=!1}update(){this.active?(this.cursors.updateWorldPoint(this.scene.cameras.main),this.barrel.x=this.x,this.barrel.y=this.y,this.lifeBar.x=this.x,this.lifeBar.y=this.y,this.handleInput(),this.handleShooting()):(this.destroy(),this.barrel.destroy(),this.lifeBar.destroy())}handleInput(){if(this.direction.up?this.body.setVelocityY(-this.speed):this.direction.down?this.body.setVelocityY(this.speed):this.body.setVelocityY(0),this.direction.left?this.body.setVelocityX(-this.speed):this.direction.right?this.body.setVelocityX(this.speed):this.body.setVelocityX(0),0!==this.body.velocity.x||0!==this.body.velocity.y){let e=Math.atan2(this.body.velocity.y,this.body.velocity.x);e>Math.PI/2&&(e-=2*Math.PI);let t=Phaser.Math.Angle.RotateTo(Phaser.Math.DegToRad(this.angle),e+Math.PI/2);this.angle=Phaser.Math.RadToDeg(t)}this.targetPosition.setTo(this.cursors.worldX,this.cursors.worldY);let e=Phaser.Math.Angle.Between(this.barrel.x,this.barrel.y,this.targetPosition.x,this.targetPosition.y);this.barrel.angle=(e+Math.PI/2)*Phaser.Math.RAD_TO_DEG}handleShooting(){this.cursors.leftButtonDown()&&this.scene.time.now>this.lastShoot&&(this.scene.cameras.main.shake(10,.0025),this.scene.tweens.add({targets:this,props:{alpha:.8},delay:0,duration:5,ease:"Power1",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!0,paused:!1}),this.bullets.getLength()<10&&(this.scene.sound.play("shootSound",{volume:.069}),this.bullets.add(new h({scene:this.scene,rotation:this.barrel.rotation,x:this.barrel.x,y:this.barrel.y,texture:"bulletBlue"})),this.lastShoot=this.scene.time.now+80))}redrawLifebar(){this.lifeBar.clear(),this.lifeBar.fillStyle(15100456,1),this.lifeBar.fillRect(-this.width/2,this.height/2,this.width*this.health,15),this.lifeBar.lineStyle(2,16777215),this.lifeBar.strokeRect(-this.width/2,this.height/2,this.width,15),this.lifeBar.setDepth(1),this.health<=.3&&this.health>.25&&this.scene.tweens.add({targets:this.lifeBar,alpha:0,duration:100,ease:"Power1",yoyo:!0,repeat:-1})}updateHealth(){if(0!==this.health){if(this.health>0)this.health-=.05,this.redrawLifebar();else if(this.health=0,this.active=!1,this.scene.cameras.main.shake(100,.01),this.scene instanceof b){let e=this.scene;this.scene.add.sprite(this.x,this.y,"explosion").play("explosion").on("animationcomplete",(()=>{e.gameOver(!1)}))}this.scene.sound.play("explosionSound",{volume:.069})}}}class o extends Phaser.GameObjects.Image{getBarrel(){return this.barrel}getBullets(){return this.bullets}constructor(e){super(e.scene,e.x,e.y,e.texture,e.frame),this.initContainer(),this.scene.add.existing(this)}initContainer(){this.health=1,this.lastShoot=0,this.speed=100,this.setDepth(0),this.barrel=this.scene.add.image(0,0,"barrelRed"),this.barrel.setOrigin(.5,1),this.barrel.setDepth(1),this.lifeBar=this.scene.add.graphics(),this.redrawLifebar(),this.bullets=this.scene.add.group({active:!0,maxSize:10,runChildUpdate:!0}),this.scene.tweens.add({targets:this,props:{y:this.y-200},delay:0,duration:2e3,ease:"Linear",easeParams:null,hold:0,repeat:-1,repeatDelay:0,yoyo:!0}),this.scene.physics.world.enable(this)}update(){this.active?(this.barrel.x=this.x,this.barrel.y=this.y,this.lifeBar.x=this.x,this.lifeBar.y=this.y,this.handleShooting()):(this.destroy(),this.barrel.destroy(),this.lifeBar.destroy())}handleShooting(){this.scene.time.now>this.lastShoot&&this.bullets.getLength()<10&&(this.bullets.add(new h({scene:this.scene,rotation:this.barrel.rotation,x:this.barrel.x,y:this.barrel.y,texture:"bulletRed"})),this.lastShoot=this.scene.time.now+400)}redrawLifebar(){this.lifeBar.clear(),this.lifeBar.fillStyle(15100456,1),this.lifeBar.fillRect(-this.width/2,this.height/2,this.width*this.health,15),this.lifeBar.lineStyle(2,16777215),this.lifeBar.strokeRect(-this.width/2,this.height/2,this.width,15),this.lifeBar.setDepth(1)}updateHealth(){this.health>0?(this.health-=.05,this.redrawLifebar()):(this.health=0,this.active=!1),this.scene.sound.play("explosionSound",{volume:.069})}}class l extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture),this.initImage(),this.scene.add.existing(this)}initImage(){this.setOrigin(0,0),this.scene.physics.world.enable(this),this.body.setImmovable(!0)}update(){}}class d extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture,e.frame),this.defaultTexture=e.texture,this.overTexture=e.texture,this.initImage(),this.initInput(),this.scene.add.existing(this),this.downed=!1}initImage(){this.setOrigin(.5,.5),this.setInteractive(),this.setDepth(1)}initInput(){this.on(Phaser.Input.Events.POINTER_OVER,this.onOver,this),this.on(Phaser.Input.Events.POINTER_OUT,this.onOut,this),this.on(Phaser.Input.Events.POINTER_DOWN,this.onDown,this),this.on(Phaser.Input.Events.POINTER_UP,this.onUp,this)}onOver(){this.setTexture(this.overTexture)}onOut(){this.downed=!1,this.setAlpha(1),this.setTexture(this.defaultTexture)}onDown(){this.setAlpha(.75),this.scene.sound.play("button"),this.downed=!0}onUp(){this.setTexture(this.defaultTexture),this.setAlpha(1)}}class c extends d{constructor(e,t){super(e),this.overTexture=t}onUp(){super.onUp(),this.downed&&(this.downed=!1,this.scene instanceof b&&this.scene.pauseGame())}}class u extends Phaser.GameObjects.Container{constructor(e,t,s){super(e,t,s),this.textList=[],this.imageList=[],this.buttonList=[],this.initContainer(),this.scene.add.existing(this)}initContainer(){this.setDepth(3),this.displayZone=this.scene.add.zone(w.width/2,w.height/2,w.width,w.height).setScrollFactor(0)}addText(e,t,s,i){const a=this.scene.add.text(e,t,s,i).setOrigin(0,0).setScrollFactor(0);return this.textList.push(a),this.add(a),a}addImage(e,t,s,i,a,h){const n=this.scene.add.image(e,t,s,i).setOrigin(0,0).setScrollFactor(0);return this.imageList.push(n),this.add(n),a&&h&&(n.displayWidth=a,n.displayHeight=h),n}addButton(e){e.setScrollFactor(0),this.buttonList.push(e),this.add(e)}disableInteractive(){return this.buttonList.forEach((e=>{e.disableInteractive()})),this}setInteractive(){return this.buttonList.forEach((e=>{e.setInteractive()})),this}get DisplayZone(){return this.displayZone}}class p extends u{constructor(e,t,s){super(e,t,s),this.initHeader()}initHeader(){let e=new c({scene:this.scene,x:0,y:0,texture:"pauseDefault"},"pauseHover");this.addButton(e),Phaser.Display.Align.In.TopRight(e,this.displayZone,-10,-10)}}class y extends d{constructor(e,t){super(e),this.overTexture=t}onUp(){if(super.onUp(),!this.downed)return;this.downed=!1;let e=this.scene.cameras.getCamera("miniMap");const t=this.scene.cameras.main.postFX.addWipe(.3,1,1);this.scene.scene.transition({target:"MenuScene",duration:500,moveBelow:!0,onUpdate:s=>{t.progress=s,e.setSize((null==e?void 0:e.width)*(1-s),(null==e?void 0:e.height)*(1-s))}})}}class g extends d{constructor(e,t){super(e),this.overTexture=t}onUp(){if(super.onUp(),!this.downed)return;this.downed=!1,this.scene.scene.isActive("GameScene")&&(this.scene.cameras.main.once("camerafadeoutcomplete",(()=>{this.scene.scene.restart(),this.scene.data.reset()})),this.scene.cameras.main.fadeOut(500));const e=this.scene.cameras.main.postFX.addWipe();this.scene.scene.transition({target:"GameScene",duration:500,moveBelow:!0,onUpdate:t=>{e.progress=t}})}}class m extends d{constructor(e,t){super(e),this.overTexture=t}onUp(){super.onUp(),this.downed&&(this.downed=!1,this.scene instanceof b&&this.scene.resumeGame())}}class f extends d{constructor(e){super(e),this.defaultTexture="soundOnDefault",this.overTexture="soundOnHover",this.setTexture(this.defaultTexture)}onUp(){super.onUp(),this.downed&&(this.downed=!1,this.scene.sound.setMute(!this.scene.sound.mute),this.scene.sound.mute?(this.defaultTexture="soundOnDefault",this.setTexture("soundOnDefault"),this.overTexture="soundOnHover"):(this.defaultTexture="soundOffDefault",this.setTexture("soundOffDefault"),this.overTexture="soundOffHover"))}}class v extends u{constructor(e,t,s){super(e,t,s),this.initPaused()}initPaused(){this.displayZone.setSize(w.width/1.8,w.height/1.8);let e=this.addImage(0,0,"board",void 0,w.width/1.8,w.height/1.8).setOrigin(.5,.5);Phaser.Display.Align.In.Center(e,this.displayZone);let t=this.addText(0,0,"PAUSED",{fontSize:"60px",color:"#fff",fontStyle:"bold"}).setOrigin(.5,.5);Phaser.Display.Align.In.TopCenter(t,this.displayZone,0,-50);let s=new m({scene:this.scene,x:0,y:0,texture:"resumeDefault"},"resumeHover");this.addButton(s),Phaser.Display.Align.In.Center(s,this.displayZone);let i=new g({scene:this.scene,x:0,y:0,texture:"restartDefault"},"restartHover");this.addButton(i),Phaser.Display.Align.In.Center(i,this.displayZone,200,0);let a=new y({scene:this.scene,x:0,y:0,texture:"homeDefault"},"homeHover");this.addButton(a),Phaser.Display.Align.In.Center(a,this.displayZone,-200,0);let h=new f({scene:this.scene,x:0,y:0,texture:"soundDefault"});this.addButton(h),Phaser.Display.Align.In.BottomCenter(h,this.displayZone,0,-20)}}class x extends u{constructor(e,t,s){super(e,t,s),this.initGameOver()}initGameOver(){this.displayZone.setSize(w.width/2,w.height/2);let e=this.addImage(0,0,"board",void 0,w.width/2,w.height/2).setOrigin(.5,.5);Phaser.Display.Align.In.Center(e,this.displayZone),this.titleText=this.addText(0,0,"VICOTRY",{fontSize:"60px",color:"#fff",fontStyle:"bold"}).setOrigin(.5,.5),Phaser.Display.Align.In.TopCenter(this.titleText,this.displayZone,0,-50),this.scoreText=this.addText(0,0,"Your Score: 0",{fontSize:"40px",color:"#fff",fontStyle:"bold"}).setOrigin(.5,.5),Phaser.Display.Align.In.BottomCenter(this.scoreText,this.displayZone,0,-150);let t=this.addText(0,0,"High Score: "+localStorage.getItem("highscore"),{fontSize:"40px",color:"#fff",fontStyle:"bold"}).setOrigin(.5,.5);Phaser.Display.Align.In.BottomCenter(t,this.displayZone,0,-50);let s=new g({scene:this.scene,x:0,y:0,texture:"restartDefault"},"restartHover");this.addButton(s),Phaser.Display.Align.In.Center(s,this.displayZone,200,0);let i=new y({scene:this.scene,x:0,y:0,texture:"homeDefault"},"homeHover");this.addButton(i),Phaser.Display.Align.In.Center(i,this.displayZone,-200,0)}setScore(e){this.scoreText.setText(`Score: ${e}`)}setTitle(e){this.titleText.setText(e)}}!function(e){e[e.PLAYING=0]="PLAYING",e[e.PAUSED=1]="PAUSED",e[e.GAMEOVER=2]="GAMEOVER"}(i||(i={}));class b extends Phaser.Scene{constructor(){super({key:"GameScene"})}init(){this.physics.world.setFPS(144),this.sound.stopAll(),this.sound.add("gameBGM",{loop:!0,volume:.3}).play(),this.anims.get("explosion")||this.anims.create({key:"explosion",frames:[{key:"explosion1"},{key:"explosion2"},{key:"explosion3"},{key:"explosion4"},{key:"explosion5"}],frameRate:30,repeat:0}),this.score=0}create(){this.map=this.make.tilemap({key:"levelMap"}),this.tileset=this.map.addTilesetImage("tiles"),this.layer=this.map.createLayer("tileLayer",this.tileset,0,0),this.layer.setCollisionByProperty({collide:!0}),this.physics.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.obstacles=this.add.group({runChildUpdate:!0}),this.enemies=this.add.group({}),this.convertObjects(),this.initPhysics(),this.createUI(),this.createMiniMap(),this.cameras.main.fadeIn(500),this.InputHandler=new n(this),this.InputHandler.attach(this.player),this.cameras.main.startFollow(this.player),this.gameState=i.PLAYING}update(){this.gameState===i.PLAYING&&(0===this.enemies.getLength()&&this.gameOver(!0),this.player.update(),this.enemies.getChildren().forEach((e=>{if(e.update(),this.player.active&&e.active&&e instanceof o){var t=Phaser.Math.Angle.Between(e.body.x,e.body.y,this.player.body.x,this.player.body.y);e.getBarrel().angle=(t+Math.PI/2)*Phaser.Math.RAD_TO_DEG}}),this),this.updateScore())}ignoreOnMiniMap(e){this.miniMap.ignore(e)}pauseGame(){this.gameState=i.PAUSED,this.player.body.setVelocity(0);for(let e=0;e<this.tweens.getTweens().length;e++)this.tweens.getTweens()[e].pause();this.showPausedUI(),this.player.getBullets().getChildren().forEach((e=>{e.body.setVelocity(0)})),this.enemies.getChildren().forEach((e=>{e.getBullets().getChildren().forEach((e=>{e.body.setVelocity(0)}))}))}resumeGame(){this.hidePausedUI(),this.gameState=i.PLAYING;for(let e=0;e<this.tweens.getTweens().length;e++)this.tweens.getTweens()[e].resume();this.player.getBullets().getChildren().forEach((e=>{this.physics.velocityFromRotation(e.rotation-Math.PI/2,800,e.body.velocity)})),this.enemies.getChildren().forEach((e=>{e.getBullets().getChildren().forEach((e=>{this.physics.velocityFromRotation(e.rotation-Math.PI/2,800,e.body.velocity)}))}))}gameOver(e){this.player.body&&this.physics.world.remove(this.player.body);for(let e=0;e<this.tweens.getTweens().length;e++)this.tweens.getTweens()[e].pause();let t;if(this.player.setActive(!1),this.UIContainer.disableInteractive(),this.pausedUI.disableInteractive(),this.sound.stopAll(),e?this.sound.add("victory",{loop:!1,volume:.3}).play():this.sound.add("defeat",{loop:!1,volume:.3}).play(),this.gameState=i.GAMEOVER,this.gameOverUI=new x(this,0,0),this.gameOverUI.setScore(this.score),this.gameOverUI.setTitle(e?"VICTORY":"GAME OVER"),this.ignoreOnMiniMap(this.gameOverUI),this.gameOverUI.setAlpha(0),e){let e=this.add.image(w.width/2,w.height/2,"victory").setScale(0).setDisplaySize(600,500).setScrollFactor(0);this.ignoreOnMiniMap(e),t=this.tweens.chain({targets:e,tweens:[{scale:1,ease:Phaser.Math.Easing.Elastic.Out,duration:500},{y:w.height/4,ease:Phaser.Math.Easing.Sine.In,duration:500},{alpha:0,ease:Phaser.Math.Easing.Sine.Out,duration:500}]})}else{let e=this.add.image(w.width/2,w.height/2,"defeat").setScale(0).setDisplaySize(600,500).setScrollFactor(0);this.ignoreOnMiniMap(e),t=this.tweens.chain({targets:e,tweens:[{scale:1,ease:Phaser.Math.Easing.Elastic.Out,duration:500},{y:w.height/4,ease:Phaser.Math.Easing.Sine.In,duration:500},{alpha:0,ease:Phaser.Math.Easing.Sine.Out,duration:500}]})}this.tweens.add({targets:this.gameOverUI,alpha:1,duration:1e3,delay:1500,ease:"Sine.easeInOut"}).on(Phaser.Tweens.Events.TWEEN_COMPLETE,(()=>{this.gameOverUI.setInteractive()}))}convertObjects(){this.map.getObjectLayer("objects").objects.forEach((e=>{if("player"===e.type)this.player=new r({scene:this,x:e.x,y:e.y,texture:"tankBlue"});else if("enemy"===e.type){let t=new o({scene:this,x:e.x,y:e.y,texture:"tankRed"});this.enemies.add(t)}else{let t=new l({scene:this,x:e.x,y:e.y-40,texture:e.type});this.obstacles.add(t)}}))}initPhysics(){this.physics.add.collider(this.player,this.layer),this.physics.add.collider(this.player,this.obstacles),this.physics.add.collider(this.player.getBullets(),this.layer,this.bulletHitLayer,void 0,this),this.physics.add.collider(this.player.getBullets(),this.obstacles,this.bulletHitObstacles,void 0,this),this.enemies.getChildren().forEach((e=>{this.physics.add.overlap(this.player.getBullets(),e,this.playerBulletHitEnemy,void 0,this),this.physics.add.overlap(e.getBullets(),this.player,this.enemyBulletHitPlayer,void 0),this.physics.add.collider(e.getBullets(),this.obstacles,this.bulletHitObstacles,void 0),this.physics.add.collider(e.getBullets(),this.layer,this.bulletHitLayer,void 0)}),this)}createUI(){this.UIContainer=new p(this,0,0),this.scoreText=this.UIContainer.addText(10,10,"Score: 0",{fontSize:"50px",color:"#fff",fontStyle:"bold"}),this.events.on("updateScore",(()=>{this.scoreText.setText("Score: "+this.score)})),this.pausedUI=new v(this,0,0),this.hidePausedUI()}createMiniMap(){this.miniMap=this.cameras.add(w.width-300,w.height-200,300,200).setZoom(.1).setName("miniMap"),this.miniMap.ignore(this.UIContainer),this.miniMap.ignore(this.pausedUI),this.miniMap.startFollow(this.player,!0,.5,.5),this.miniMap.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.miniMap.setBackgroundColor(0),this.cameras.main.on(Phaser.Cameras.Scene2D.Events.FADE_OUT_START,(()=>{this.miniMap.fadeOut(500)})),this.cameras.main.on(Phaser.Cameras.Scene2D.Events.FADE_IN_START,(()=>{this.miniMap.fadeIn(500)}))}bulletHitLayer(e){e instanceof h&&e.destroy()}bulletHitObstacles(e,t){e instanceof h&&t instanceof l&&e.destroy()}enemyBulletHitPlayer(e,t){e instanceof h&&t instanceof r&&(e.destroy(),t.updateHealth())}playerBulletHitEnemy(e,t){e instanceof h&&t instanceof o&&(this.score+=10,this.events.emit("updateScore"),t.updateHealth(),e.destroy())}hidePausedUI(){this.pausedUI.disableInteractive(),this.tweens.add({targets:this.pausedUI,y:w.height,alpha:0,duration:150,ease:"Sine.easeInOut"}).on(Phaser.Tweens.Events.TWEEN_COMPLETE,(()=>{this.UIContainer.setVisible(!0),this.UIContainer.setInteractive()}))}showPausedUI(){this.UIContainer.disableInteractive(),this.UIContainer.setVisible(!1),this.tweens.add({targets:this.pausedUI,y:0,alpha:1,duration:200,ease:"Power3"}).on(Phaser.Tweens.Events.TWEEN_COMPLETE,(()=>{this.pausedUI.setInteractive()}))}updateScore(){let e=localStorage.getItem("highscore");e?this.score>parseInt(e)&&localStorage.setItem("highscore",this.score.toString()):(console.log("setting highscore"),localStorage.setItem("highscore",this.score.toString()))}}class I extends Phaser.Scene{constructor(){super({key:"MenuScene"}),this.bitmapTexts=[]}init(){this.add.image(0,0,"background").setOrigin(0).setDisplaySize(w.width,w.height),this.sound.stopAll(),this.sound.locked?this.sound.once("unlocked",(()=>{this.sound.play("menuBGM",{loop:!0,volume:.3})})):this.sound.play("menuBGM",{loop:!0,volume:.3})}create(){this.UIContainer=new u(this,0,0);let e=new g({scene:this,x:0,y:0,texture:"playTextDefault"},"playTextHover");this.UIContainer.addButton(e),Phaser.Display.Align.In.Center(e,this.UIContainer.DisplayZone,0,100),this.bitmapTexts.push(this.add.bitmapText(this.sys.canvas.width/2,this.sys.canvas.height/2-100,"font","TANK?",100).setTint(16711680).setOrigin(.5)),this.UIContainer.setY(w.height+this.UIContainer.height),this.UIContainer.disableInteractive(),this.tweens.add({targets:this.UIContainer,y:0,duration:1e3,ease:"Power3"}).on("complete",(()=>{this.UIContainer.setInteractive()}))}update(){}}const w={title:"Tank",version:"0.0.1",width:1600,height:1200,zoom:1,type:Phaser.AUTO,parent:"game",scene:[a,I,b],input:{keyboard:!0},physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},backgroundColor:"#000000",render:{antialias:!0},scale:{mode:Phaser.Scale.ScaleModes.FIT,autoCenter:Phaser.Scale.Center.CENTER_BOTH}};class P extends Phaser.Game{constructor(e){super(e)}}window.addEventListener("load",(()=>{new P(w)}))}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var h=s[e]={exports:{}};return t[e].call(h.exports,h,h.exports,i),h.exports}i.m=t,e=[],i.O=(t,s,a,h)=>{if(!s){var n=1/0;for(d=0;d<e.length;d++){for(var[s,a,h]=e[d],r=!0,o=0;o<s.length;o++)(!1&h||n>=h)&&Object.keys(i.O).every((e=>i.O[e](s[o])))?s.splice(o--,1):(r=!1,h<n&&(n=h));if(r){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}h=h||0;for(var d=e.length;d>0&&e[d-1][2]>h;d--)e[d]=e[d-1];e[d]=[s,a,h]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,h,[n,r,o]=s,l=0;if(n.some((t=>0!==e[t]))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(o)var d=o(i)}for(t&&t(s);l<n.length;l++)h=n[l],i.o(e,h)&&e[h]&&e[h][0](),e[h]=0;return i.O(d)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=i.O(void 0,[96],(()=>i(667)));a=i.O(a)})();